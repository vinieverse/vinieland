<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Vinie Land</title>

<style>
body{
  margin:0;
  background:black;
  color:#00ffd5;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  overflow:hidden;
  font-family:monospace;
}

pre{
  font-size:5px;
  line-height:5px;
  letter-spacing:1px;
}
</style>
</head>

<body>
<pre id="ascii"></pre>

<script>
const img = new Image();
img.src = "vinie.jpg";

const letters = "VINIE";
const output = document.getElementById("ascii");

img.onload = function(){

  const canvas = document.createElement("canvas");
  const ctx = canvas.getContext("2d");

  const width = 200;
  const scale = img.height/img.width;

  canvas.width = width;
  canvas.height = width*scale;

  ctx.drawImage(img,0,0,canvas.width,canvas.height);
  const data = ctx.getImageData(0,0,canvas.width,canvas.height).data;

  let frame = 0;

  function draw(){
    let ascii="";

    for(let y=0;y<canvas.height;y++){
      for(let x=0;x<canvas.width;x++){

        const i=(y*canvas.width+x)*4;
        const r=data[i];
        const g=data[i+1];
        const b=data[i+2];

        const brightness=(r+g+b)/3;

        // remove bright background
        if(brightness>185){
          ascii+=" ";
          continue;
        }

        // formation effect
        if(Math.random() < frame/70){
          ascii += letters[Math.floor(Math.random()*letters.length)];
        } else {
          ascii += " ";
        }
      }
      ascii+="\n";
    }

    output.textContent = ascii;
    frame++;

    if(frame<80) requestAnimationFrame(draw);
  }

  draw();
};
</script>

</body>
</html>
